<div class="create-campaign-page">
  <div class="container">
    <h1>Обновить кампанию</h1>
    <form [formGroup]="form" (ngSubmit)="submit()" novalidate>
      <div class="form-group">
        <label for="title">Название</label>
        <input id="title" type="text" formControlName="title" />
        <div class="error" *ngIf="form.get('title')?.touched && form.get('title')?.invalid">
          Название обязательно (мин. 3 символа)
        </div>
      </div>
      <div class="form-group">
        <label for="description">Описание</label>
        <textarea id="description" rows="5" formControlName="description"></textarea>
        <div class="error" *ngIf="form.get('description')?.touched && form.get('description')?.invalid">
          Описание обязательно (мин. 10 символов)
        </div>
      </div>
      <div class="form-group">
        <label for="image">Картинка</label>
        <input id="image" type="file" (change)="onFileSelected($event)" />
        <div class="error" *ngIf="fileError">
          Картинка обязательна
        </div>
      </div>
      
      <div class="form-group">
        <label>Типы проведения игр</label>
        <div class="room-types">
          <div class="checkbox-group" *ngFor="let roomType of roomTypes">
            <input 
              type="checkbox" 
              [id]="'room-' + roomType.value"
              (change)="onRoomTypeChange(roomType.value, $event)">
            <label [for]="'room-' + roomType.value">{{ roomType.label }}</label>
          </div>
        </div>
        <div class="error" *ngIf="form.get('supportedRoomTypes')?.touched && form.get('supportedRoomTypes')?.invalid">
          Выберите хотя бы один тип проведения игры
        </div>
      </div>

      <div class="form-inline">
        <div class="form-group">
          <label for="level">Уровень</label>
          <input id="level" type="number" formControlName="level" />
        </div>
        <div class="form-group">
          <label for="price">Цена (за сессию)</label>
          <input id="price" type="number" formControlName="price" />
        </div>
      </div>
      <div class="form-inline">
        <div class="form-group">
          <label for="maxPlayers">Макс. игроков</label>
          <input id="maxPlayers" type="number" formControlName="maxPlayers" />
        </div>
        <div class="form-group">
          <label for="durationHours">Длительность (часы)</label>
          <input id="durationHours" type="number" formControlName="durationHours" />
        </div>
      </div>
      <div class="form-group">
        <label for="tags">Теги (через запятую)</label>
        <input id="tags" type="text" formControlName="tags" placeholder="например: Horror, Epic, Roleplay"/>
      </div>
      <div class="error" *ngIf="error">{{ error }}</div>
      <div class="actions">
        <button type="submit" [disabled]="isSubmitting">Обновить</button>
        <button type="button" (click)="router.navigate(['/campaigns'])">Отмена</button>
      </div>
    </form>
  </div>
</div>